"use strict";require("dotenv").config();var express=require("express"),cors=require("cors"),nodemailer=require("nodemailer"),helmet=require("helmet"),path=require("path"),morgan=require("morgan"),app=express(),PORT=process.env.PORT||3e3;app.use(express.json()),app.use(cors()),app.use(helmet()),app.use(express.urlencoded({extended:!1})),app.use(express.static(path.resolve(__dirname,"../dist"))),"development"===process.env.NODE_ENV&&app.use(morgan());var transporter=nodemailer.createTransport({service:"gmail",secure:!0,port:25,auth:{user:process.env.FROM_EMAIL,pass:process.env.PASS},tls:{rejectUnauthorized:!1}});app.route("/").get(function(e,n){n.send("test")}),app.post("/api/reservation",function(e,s){var n=e.body,t=n.date,o=n.time,p=n.people,r=n.name,a=n.phone,c=n.note,i={from:"RESERVIERUNG QUANXUA <".concat(process.env.FROM_EMAIL),to:process.env.TO_EMAIL,subject:"RESERVIERUNG",html:"\n        <p style='font-size: 20px'><b>Name:</b> ".concat(r||"unknown","</p>  \n        <p style='font-size: 20px'><b>Datum:</b> ").concat(t||"unknown","</p>\n        <p style='font-size: 20px'><b>Uhrzeit:</b> ").concat(o||"unknown","</p>\n        <p style='font-size: 20px'><b>Personen:</b> ").concat(p||"unknown","</p>\n        <p style='font-size: 20px'><b>Tel:</b> <a href='tel:").concat(a||"unknown","'>").concat(a||"unknown","</a></p>\n        <p style='font-size: 19px'><b style='font-size: 20px'>Besondere Wünsche:</b> ").concat(c||"empty","</p>\n        ")};transporter.sendMail(i,function(e,n){e?s.send({status:"ERROR",message:"Fehlgeschlagen. Versuchen Sie später nochmal!",err:e}):s.send({status:"OK",message:"Ihre Reservierung war erfolreich. Danke schön!"})})}),app.post("/api/contact",function(e,s){var n=e.body,t=n.name,o=n.email,p=n.subject,r=n.message,a=n.phone,c={from:"KONTAKT QUANXUA <".concat(o),to:process.env.TO_EMAIL,subject:p,html:"\n        <p style='font-size: 18px'><b>Name:</b> ".concat(t,"</p>\n        <p style='font-size: 18px'><b>Email:</b> ").concat(o,"</p>\n        <p style='font-size: 18px'><b>Tel:</b> <a href='tel:").concat(a||"","'>").concat(a||"","</a></p>\n        <p style='font-size: 18px'>").concat(r,"</p>\n        ")};transporter.sendMail(c,function(e,n){e?s.send({status:"ERROR",message:"Fehlgeschlagen. Versuchen Sie später nochmal!"}):s.send({status:"OK",message:"Danke für Ihre Nachricht!"})})}),app.listen(PORT,function(){console.log("listening to ".concat(PORT,"..."))});