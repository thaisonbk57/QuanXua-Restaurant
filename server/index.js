"use strict";require("dotenv").config();var express=require("express"),cors=require("cors"),nodemailer=require("nodemailer"),helmet=require("helmet"),path=require("path"),app=express(),PORT=process.env.PORT||3e3;console.log(process.env.FROM_EMAIL,process.env.PASS),app.use(express.json()),app.use(cors()),app.use(helmet()),app.use(express.urlencoded({extended:!1})),app.use(express.static(path.resolve(__dirname,"../dist")));var transporter=nodemailer.createTransport({service:"gmail",secure:!0,port:25,auth:{user:process.env.FROM_EMAIL,pass:process.env.PASS},tls:{rejectUnauthorized:!1}});app.route("/").get(function(e,n){n.render("index")}),app.post("/api/reservation",function(e,o){var n=e.body,s=n.name,r=n.email,t=n.seat,a=n.time,p=n.date,c=n.note,i=n.phone;console.log(e.body);var u={from:"RESERVATION ".concat(s," <").concat(r),to:process.env.TO_EMAIL,subject:s,html:"\n        <p><b>Name: ".concat(s||"unknown","</b></p>  \n        <p><b>Date: ").concat(p||"unknown","</b></p>\n        <p><b>Time: ").concat(a||"unknown","</b></p>\n        <p><b>Seats: ").concat(t||"unknown","</b></p>\n        <p><b>Phone: ").concat(i||"unknown","</b></p>\n        <p><b>Email: ").concat(r||"unknown","</b></p>\n        <p><b>Note: ").concat(c||"empty","</b></p>\n        ")};transporter.sendMail(u,function(e,n){e?o.send({status:"ERROR",message:"Something went wrong. Your reservation failed.",err:e}):o.send({status:"OK",message:"Thank you for your reservation!"})})}),app.listen(PORT,function(){console.log("listening to ".concat(PORT,"..."))});